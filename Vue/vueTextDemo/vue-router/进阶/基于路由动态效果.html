<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>过渡效果</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="../../../js/vue2.5.js"></script>
    <script src="../../../js/vue-router3.0.js"></script>
    <style>
        .fade-enter-active, .fade-leave-active {
        transition: opacity .5s ease;
        }
        .fade-enter, .fade-leave-active {
        opacity: 0
        }
        .child-view {
        position: absolute;
        transition: all .5s cubic-bezier(.55,0,.1,1);
        }
        .slide-left-enter, .slide-right-leave-active {
        opacity: 0;
        -webkit-transform: translate(30px, 0);
        transform: translate(30px, 0);
        }
        .slide-left-leave-active, .slide-right-enter {
        opacity: 0;
        -webkit-transform: translate(-30px, 0);
        transform: translate(-30px, 0);
        }

        .profile-enter-active,
        .profile-leave-active {
            transition: all 1s ease;
        }

        .profile-enter,
        .profile-leave-to {
            opacity: 0;
            transform: scale(1);
        }

        .posts-enter-active,
        .posts-leave-active {
            transition: all 1s ease;
        }

        .posts-enter,
        .posts-leave-to {
            opacity: 0;
            transform: translateY(50px);
        }
    </style>
</head>

<body>
    <div id="app">
        <h1>Transitions</h1>
        <ul>
            <li>
                <router-link to="/">/</router-link>
            </li>
            <li>
                <router-link to="/parent">/parent</router-link>
            </li>
            <li>
                <router-link to="/parent/foo">/parent/foo</router-link>
            </li>
            <li>
                <router-link to="/parent/bar">/parent/bar</router-link>
            </li>
        </ul>
        <transition name="fade" mode="out-in">
            <router-view class="view"></router-view>
        </transition>
    </div>
</body>
<script>
    const Home = {
        template: `
            <div class="home">
            <h2>Home</h2>
            <p>hello</p>
            </div>
        `
    }

    const Parent = {
        data() {
            return {
                transitionName: 'slide-left'
            }
        },
        // dynamically set transition based on route change
        watch: {
            '$route' (to, from) {
                const toDepth = to.path.split('/').length
                const fromDepth = from.path.split('/').length
                this.transitionName = toDepth < fromDepth ? 'slide-right' : 'slide-left'
            }
        },
        template: `
            <div class="parent">
            <h2>Parent</h2>
            <transition :name="transitionName">
                <router-view class="child-view"></router-view>
            </transition>
            </div>
        `
    }

    const Default = {
        template: '<div class="default">default</div>'
    }
    const Foo = {
        template: '<div class="foo">foo</div>'
    }
    const Bar = {
        template: '<div class="bar">bar</div>'
    }

    const router = new VueRouter({
        mode: 'history',
        routes: [{
                path: '/',
                component: Home
            },
            {
                path: '/parent',
                component: Parent,
                children: [{
                        path: '',
                        component: Default
                    },
                    {
                        path: 'foo',
                        component: Foo
                    },
                    {
                        path: 'bar',
                        component: Bar
                    }
                ]
            }
        ]
    })
    new Vue({
        router,
        el: '#app',
        data: {

        },
        methods: {

        },
    })
</script>

</html>